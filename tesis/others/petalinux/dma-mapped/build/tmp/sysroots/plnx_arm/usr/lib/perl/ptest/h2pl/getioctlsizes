#!/usr/bin/perl

open (IOCTLS,'/scratch/petalinux-yocto/yocto_sdk_minimal_2016.4/build/tmp/sysroots/zynq-generic/usr/include/sys/ioctl.h') || die "ioctl open failed";

while (<IOCTLS>) {
    if (/^\s*#\s*define\s+\w+\s+_IO(R|W|WR)\('?\w+'?,\s*\w+,\s*([^)]+)/) {
	$need{$2}++;
    } 
}

foreach $key ( sort keys %need ) {
    print $key,"\n";
} 
